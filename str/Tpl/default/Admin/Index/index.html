<include file="Public/header" />
<link rel="stylesheet" href="__PUBLIC__/css/fullcalendar.css" />
	<body class="no-skin">
		<!-- #section:basics/navbar.layout -->
		<div id="navbar" class="navbar navbar-default">
			<div class="navbar-container" id="navbar-container">
				<!-- #section:basics/sidebar.mobile.toggle -->
				<button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler">
					<span class="sr-only">Toggle sidebar</span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>
				</button>

				<!-- /section:basics/sidebar.mobile.toggle -->
				<div class="navbar-header pull-left">
					<!-- #section:basics/navbar.layout.brand -->
					<a href="#" class="navbar-brand">
						<small>
							<img src="__PUBLIC__/images/cj_logo.png" width="25" height="25">
							东方购物质效考核系统
						</small>
					</a>
					<!-- /section:basics/navbar.layout.brand -->
				</div>
<include file="Public/userbar" />
			</div><!-- /.navbar-container -->
		</div>

		<!-- /section:basics/navbar.layout -->
		<div class="main-container" id="main-container">
			<!-- #section:basics/sidebar -->
			<div id="sidebar" class="sidebar responsive">

<include file="Public/menu" />

				<!-- #section:basics/sidebar.layout.minimize -->
				<div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
					<i class="ace-icon fa fa-angle-double-left" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
				</div>

				<!-- /section:basics/sidebar.layout.minimize -->
			</div>

			<!-- /section:basics/sidebar -->
			<div class="main-content">
				<!-- #section:basics/content.breadcrumbs -->
				<div class="breadcrumbs" id="breadcrumbs">
					<!-- /section:basics/content.searchbox -->
				</div>
				<!-- /section:basics/content.breadcrumbs -->
				<div class="page-content">
					<div class="page-content-area">
						<div class="col-xs-12" style="padding-bottom: 100px">
							<div id="calendar"></div>
						</div>
					</div><!-- /.page-content-area -->
					
				</div><!-- /.page-content -->
			</div><!-- /.main-content -->
<include file="Public/footer" />
<script src="__PUBLIC__/js/date-time/moment.min.js"></script>
<script src="__PUBLIC__/js/fullcalendar.min.js"></script>
	<script type="text/javascript">
		var date = new Date();
		var d = date.getDate();
		var m = date.getMonth();
		var y = date.getFullYear();
		jQuery(function($){
			$('#calendar').fullCalendar({
				header: {
					left: 'month',
					center: 'title',
					right: 'prev,next today',
				},
				titleFormat: "YYYY年MM月",
				firstDay: 1,
				monthNames:['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
				dayNamesShort:['周日', '周一', '周二', '周三', '周四', '周五', '周六'],
				buttonText:{
					today: '今天',
					month: '月',
					week: '周',
					day: '日',
					prev: '上一页',  
		            next: '下一页'  
				},
				events: function(start, end, timezone, callback) {
						$.ajax({
							url: '/index.php/Index/getMyProgram',
							dataType: 'json',
							data: {
								// our hypothetical feed requires UNIX timestamps
								start: start.unix(),
								end: end.unix()
							},
							success: function(data) {
								/* $(doc).find('event').each(function() {
									events.push({
										title: $(this).attr('title'),
										start: $(this).attr('start') // will be parsed
									});
								}); */
								//alert(events);
								callback(data);
							}
						});
					},
				eventClick: function(event) {
					var id=event.id;
					var index = layer.open({
					    type: 2,
					    title:event.title,
					    content: '/index.php/Index/check_program?id='+id,
					    maxmin:true
					});
					layer.full(index);
			}
			});
			
			//绑定【本月】【下一月】【上一月】触发事件
			  $('.fc-button-prev').bind('click', updateEvent);
			  $('.fc-button-next').bind('click', updateEvent);
			  $('.fc-button-today').bind('click', updateEvent);  
		});
		
		//更新日历数据
		function updateEvent(){
			//
		}
		</script>
	</body>
</html>
